<div class="modal fade modal-load" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-lg pt-standalone">
        <div class="modal-content rounded-5">
            <div class="modal-header border-0">
                <h5 class="modal-title fw-bold"><?= isset($data['id']) ? $jatbi->lang("Sửa thông tin nhân viên") : $jatbi->lang("Thêm nhân viên mới") ?></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="POST" action="<?= $_SERVER['REQUEST_URI'] ?>" enctype="multipart/form-data">
                    <input type="hidden" name="id" value="<?= $data['id'] ?? '' ?>">

                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("Mã nhân viên (SN)")?></label>
                                <input type="text" name="sn" class="form-control py-3 rounded-4 bg-body-tertiary" placeholder="<?=$jatbi->lang("Mã định danh, ví dụ: NV001")?>" value="<?=$data['sn'] ?? ''?>" <?= isset($data['sn']) ? 'readonly' : '' ?> required>
                            </div>

                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("Họ và tên")?> <span class="text-danger">*</span></label>
                                <input type="text" name="person_name" class="form-control py-3 rounded-4 bg-body-tertiary" placeholder="<?=$jatbi->lang("Họ và tên nhân viên")?>" value="<?=$data['person_name'] ?? ''?>" required>
                            </div>

                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("Số điện thoại")?></label>
                                <input type="tel" name="telephone" class="form-control py-3 rounded-4 bg-body-tertiary" placeholder="<?=$jatbi->lang("Số điện thoại")?>" value="<?=$data['telephone'] ?? ''?>">
                            </div>

                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("Giới tính")?></label>
                                <select name="gender" class="form-select py-3 rounded-4 bg-body-tertiary">
                                    <option value="1" <?= (isset($data['gender']) && $data['gender'] == 1) ? 'selected' : '' ?>><?=$jatbi->lang("Nam")?></option>
                                    <option value="2" <?= (isset($data['gender']) && $data['gender'] == 2) ? 'selected' : '' ?>><?=$jatbi->lang("Nữ")?></option>
                                    <option value="3" <?= (isset($data['gender']) && $data['gender'] == 3) ? 'selected' : '' ?>><?=$jatbi->lang("Khác")?></option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("Ngày sinh")?></label>
                                <input type="date" name="birthday" class="form-control py-3 rounded-4 bg-body-tertiary" value="<?=$data['birthday'] ?? ''?>">
                            </div>

                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("Số CMND/CCCD")?></label>
                                <input type="text" name="id_card" class="form-control py-3 rounded-4 bg-body-tertiary" placeholder="<?=$jatbi->lang("Chứng minh nhân dân / Căn cước")?>" value="<?=$data['id_card'] ?? ''?>">
                            </div>

                            <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?=$jatbi->lang("Địa chỉ")?></label>
                                <textarea name="address" class="form-control rounded-4 bg-body-tertiary" rows="3" placeholder="<?=$jatbi->lang("Địa chỉ thường trú")?>"><?=$data['address'] ?? ''?></textarea>
                            </div>
                        </div>

                        <div class="col-lg-12">
                             <div class="mb-3">
                                <label class="fw-bold text-body mb-2"><?= $jatbi->lang("Ảnh đăng ký") ?><span class="text-danger">*</span></label>
                                <?php if(isset($data['registration_photo']) && !empty($data['registration_photo'])): ?>
                                    <div class="mb-2">
                                        <img src="<?= $data['registration_photo'] ?>" class="img-thumbnail" style="width:100px; height:auto;">
                                        <p class="small text-muted mt-1">Ảnh hiện tại. Chọn file mới để thay thế.</p>
                                    </div>
                                <?php endif; ?>
                                <input type="file" name="registration_photo" class="form-control py-3 rounded-4 bg-body-tertiary" accept="image/*">
                            </div>
                        </div>

                        <div class="col-lg-12">
                            <button type="submit" class="btn btn-primary w-100 py-3 rounded-pill fw-bold" data-action="submit" data-alert="true" data-load="this">
                                <?= $jatbi->lang("Hoàn thành") ?>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>